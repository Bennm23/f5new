{% extends "base.html" %}

{% block loadcss %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'f5index/f5user.css' %}">
{% endblock %}

{% block title %}
Member
{% endblock %}

{% block content %}
<div class="tab-container">
    <!-- Tab Header -->
    <div class="tab-header">
        <div class="tab" onclick="showTab('profile')">Profile</div>
        <div class="tab" onclick="showTab('blogs')">Blogs</div>
        <div class="tab" onclick="showTab('teams')">Teams</div>
    </div>

    <!-- Tab Content -->
    <div id="profile" class="tab-content active">
        <!-- Profile content -->
        <div class="section">
            {% if member.is_authenticated %}
                {% if request.user == member %}
                    <div class="profile_card">
                        <!-- Your existing profile content here -->
                        <div class="profile_username">
                            <h2>@{{ member.username }}</h2>
                        </div>
                        <div class="profile_pic">
                            <img src="{{ member.pic_url }}" />
                        </div>
                        <div class="profile_bio">
                            <p>{{ member.bio }}</p>
                        </div>
                    </div>
                    <div class="button_link_group">
                        <a class="button_link positive" href="{% url 'index:edit_member' %}">Edit profile</a>
                        <a class="button_link positive" href="{% url 'index:logout_member'%}">Logout</a>
                    </div>
                {% else %}
                    <div class="profile_card">
                        <!-- Your existing profile content here -->
                        <div class="profile_username">
                            <h2>@{{ member.username }}</h2>
                        </div>
                        <div class="profile_pic">
                            <img src="{{ member.pic_url }}" />
                        </div>
                        <div class="profile_bio">
                            <p>{{ member.bio }}</p>
                        </div>
                    </div>
                {% endif %}
            {% else %}
                <div class="profile_card">
                    <!-- Your existing profile content here -->
                    <div class="profile_username">
                        <h2>@{{ member.username }}</h2>
                    </div>
                    <div class="user_profile">
                        <img src="{{ member.pic_url }}" />
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    <div id="blogs" class="tab-content">
        <!-- Blogs content -->
        {% if not user_blogs is None %}
            <div class="section">
                <h2>My Blogs</h2>
                {% if request.user == member %}
                    {% if member.is_authenticated %}
                        <div class="button_link_group">
                            <a href="{% url 'blogs:create' %}" class="button_link positive">Create your own!</a>
                        </div>
                    {% endif %}
                {% endif %}

                <div class="results_list">
                    <!-- Your existing blogs content here -->
                    {% for blog in user_blogs %}
                    <div class="list_item">
                        <details>
                            <summary>
                                <a href="{% url 'blogs:detail' blog.id %}" class="button_link default">{{blog.title}}</a>
                                <div class="float_right_div">
                                    <h5>Created On: {{blog.create_date}}</h5>
                                </div>
                            </summary>
                            <p class="shorty">{{ blog.content | truncatewords:15 | safe}}</p>
                        </details>
                    </div>
                    {% empty %}
                    <h3>No blogs, such empty here :/</h3>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>

    <div id="teams" class="tab-content">
        <!-- Teams content -->
        {% if not user_teams is None %}
            <div class="section">
                <h2>My Teams</h2>
                {% if request.user == member %}
                    {% if user.is_authenticated %}
                        <div class="button_link_group">
                            <a href="{% url 'teams:create' %}" class="button_link positive">Create your own!</a>
                        </div>
                    {% endif %}
                {% endif %}

                <div class="results_list">
                    <!-- Your existing teams content here -->
                    {% for team in user_teams %}
                    <div class="list_item">
                        <details>
                            <summary>
                                <a href="{% url 'teams:detail' team.id %}" class="button_link default">{{team.team_name}}</a>
                                <div class="float_right_div">
                                    <h5>{{team.city}}, {{team.state}}</h5>
                                </div>
                            </summary>
                            <p class="shorty">{{ team.bio | truncatewords:15 | safe}}</p>
                        </details>
                    </div>
                    {% empty %}
                    <h3>Oh No! You haven't joined any teams...</h3>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
</div>

<script>
    function showTab(tabId) {
        var tabs = document.querySelectorAll('.tab-content');
        tabs.forEach(function(tab) {
            tab.classList.remove('active');
        });

        var selectedTab = document.getElementById(tabId);
        selectedTab.classList.add('active');
    }
</script>
{% endblock %}

