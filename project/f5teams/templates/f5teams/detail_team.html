{% extends "base.html" %}

{% block loadcss %}
    {% load static%}
    <link rel="stylesheet" href="{% static 'f5teams/f5teams.css' %}">
{% endblock %}

{% block title %}
{% endblock %}

{% block content %}
<div class="section">
    <div class="team_profile">
        <h2>{{team.team_name}}</h2>

        {% if user.is_authenticated and user in team_members %}
        <div class="button_link_group">
            <a href="{% url 'teams:edit' team.id %}" class="button_link neutral">Edit team</a> |
            <a href="{% url 'teams:delete' team.id %}" class="button_link neutral">Delete team</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="section">
    <div class="team_bio">
        <hr/>
        <h3>Club history</h3>
        <p>{{ team.bio |safe }}
    </div>
</div>

<div class="section">

    <div class="team_members">
        <hr />
        <h3>Members</h3>
        
        {% if user.is_authenticated and user not in team_members %}
        <div class="button_link_group">
            <a href="{% url 'teams:join' team.id user.id %}" class="button_link neutral">Join team</a>
            <a href="{% url 'teams:leave' team.id user.id %}" class="button_link neutral">Leave team</a>
        </div>
        {% else %}
        <div class="button_link_group">
           <a href="{% url 'members:create_member' %}" class="button_link neutral">Join team</a>
        </div>
        {% endif %}
        
        <div class="members_list results_list">
            {% for member in  team_members %}
                <div class="member_list_item">
                    <h4>
                        <a href="{% url 'members:public_profile' member.username %}">{{member.username}}</a>
                    </h4>
                    <h5>{{member.get_user_type_str}}</h5>
                </div>
            {% empty %}
                <p>This team has no members yet. <a class="button_link primary" href="{% url 'index:contact_support' %}">Know the coach?</a></p>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
