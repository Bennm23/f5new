{% extends "base.html" %}

{% block loadcss %}
    {% load static%}
    <link rel="stylesheet" href="{% static 'f5teams/f5teams.css' %}">
{% endblock %}

{% block title %}
{% endblock %}

{% block content %}
<div class="section">
    <div class="team_profile">
        <h2>{{team.team_name}}</h2>

        {% if user.is_authenticated and user in team_members %}
        <div class="button_link_group">
            <a href="{% url 'teams:edit' team.id %}" class="button_link neutral">Edit team</a> |
            <a href="{% url 'teams:delete' team.id %}" class="button_link neutral">Delete team</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="section">
    <div class="team_bio">
        <hr/>
        <h3>Club history</h3>
        <p>{{ team.bio |safe }}
    </div>
</div>

<div class="section">

    <div class="team_members">
        <hr />
        <h3>Members</h3>
        
        {% if user.is_authenticated and user not in team_members %}
        <div class="button_link_group">
            <a href="{% url 'teams:join' team.id user.id %}" class="button_link neutral">Join team</a>
        </div>
        {% elif user.is_authenticated and user in team_members %}
        <div class="button_link_group">
            <a href="{% url 'teams:leave' team.id user.id %}" class="button_link neutral">Leave team</a>
        </div>
        {% else %}
        <div class="button_link_group">
           <a href="{% url 'members:create_member' %}" class="button_link neutral">Join team</a>
        </div>
        {% endif %}
        
        <div class="members_list results_list">
            {% for member in  team_members %}
                <div class="member_list_item">
                    <h4>
                        <a href="{% url 'members:public_profile' member.username %}">{{member.username}}</a>
                    </h4>
                    <h5>{{member.get_user_type_str}}</h5>
                </div>
            {% empty %}
                <p>This team has no members yet. <a class="button_link primary" href="{% url 'index:contact_support' %}">Know the coach?</a></p>
            {% endfor %}
        </div>
    </div>
</div>

<div class="section">
    <h2>Upcoming Matchups</h2>
    <div class="matchup_list">
        {% for match in upcoming_matches %}
            <div class="member_list_item">

            
                {% if match.home_team == team %}
                    <p>{{match.home_team}} vs <a href="{% url 'teams:detail' match.away_team.id %}">{{match.away_team}}</a></p>
                {% else %}
                    <p><a href="{% url 'teams:detail' match.home_team.id %}">{{match.home_team}}</a> @ {{match.away_team}}</p>
                {% endif %}

                <a href="{% url 'teams:detail_match' match.id %}">View Matchup</a>
                <div class="match_location_info">
                        <p> {{match.match_date}} </p>
                        <p> {{match.match_location}}</p>
                </div>
            </div>
        {% empty %}
            <h3> No Matches </h3>

        {% endfor %}

    </div>
</div>

<div class="section">
    <h2>Past Matchups</h2>
    <div class="matchup_list">
        {% for match in past_matches %}
            <div class="member_list_item">

            
                {% if match.home_team == team %}
                    <p>{{match.home_team}} vs <a href="{% url 'teams:detail' match.away_team.id %}">{{match.away_team}}</a></p>
                {% else %}
                    <p><a href="{% url 'teams:detail' match.home_team.id %}">{{match.home_team}}</a> @ {{match.away_team}}</p>
                {% endif %}

                <a href="{% url 'teams:detail_match' match.id %}">View Matchup</a>
                <div class="match_location_info">
                        <p> {{match.match_date}} </p>
                        <p> {{match.match_location}}</p>
                </div>
            </div>
        {% empty %}
            <h3> No Matches </h3>

        {% endfor %}

    </div>
</div>
{% endblock %}
